Version 4
SHEET 1 3544 1144
WIRE 1008 -480 976 -480
WIRE 1408 -480 1008 -480
WIRE 1600 -480 1504 -480
WIRE 1696 -480 1600 -480
WIRE 2176 -480 1696 -480
WIRE 2448 -480 2176 -480
WIRE 2896 -480 2448 -480
WIRE 3056 -480 2992 -480
WIRE 3328 -480 3056 -480
WIRE 3392 -480 3328 -480
WIRE 3440 -480 3392 -480
WIRE 1696 -432 1696 -480
WIRE 1600 -384 1600 -400
WIRE 1632 -384 1600 -384
WIRE 2448 -352 2448 -480
WIRE 2176 -304 2176 -480
WIRE 1600 -288 1600 -384
WIRE 1616 -288 1600 -288
WIRE 1696 -288 1696 -336
WIRE 1696 -288 1680 -288
WIRE 1920 -288 1696 -288
WIRE 2048 -288 1920 -288
WIRE 2128 -288 2048 -288
WIRE 2176 -192 2176 -208
WIRE 1488 -96 1488 -432
WIRE 2176 -96 2176 -112
WIRE 2176 -96 1488 -96
WIRE 2256 -96 2176 -96
WIRE 2448 -96 2448 -272
WIRE 2448 -96 2256 -96
WIRE 2912 -96 2912 -432
WIRE 2912 -96 2448 -96
WIRE 3328 0 3328 -480
WIRE 3440 0 3440 -480
WIRE 1008 32 976 32
WIRE 1472 32 1008 32
WIRE 2912 32 1472 32
WIRE 3056 32 3056 -480
WIRE 3056 32 2976 32
WIRE 2048 48 2048 -288
WIRE 1600 64 1600 -288
WIRE 2448 80 2448 -96
WIRE 1472 144 1472 32
WIRE 1552 144 1472 144
WIRE 3328 144 3328 64
WIRE 3440 144 3440 80
WIRE 2048 160 2048 128
WIRE 2240 160 2048 160
WIRE 1600 208 1600 160
WIRE 2448 208 2448 160
WIRE 2448 208 2320 208
WIRE 2224 240 2224 208
WIRE 2224 240 2048 240
WIRE 2048 336 2048 240
WIRE 2224 336 2096 336
WIRE 2096 352 2096 336
WIRE 2096 416 2096 400
WIRE 2224 416 2096 416
WIRE 2048 480 2048 416
FLAG 912 192 0
FLAG 896 -384 0
FLAG 912 112 VUSB
FLAG 896 -464 VBAT
FLAG 3440 144 0
FLAG 3392 -480 OUT
FLAG 1008 32 VUSB
FLAG 1008 -480 VBAT
FLAG 1600 208 0
FLAG 2256 -96 gate
FLAG 1920 -288 gate1
FLAG 3328 144 0
FLAG 2048 480 0
SYMBOL voltage 912 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 1m 1n 1n 1m 2m)
SYMBOL voltage 896 -480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL res 3424 -16 R0
SYMATTR InstName Rload1
SYMATTR Value 100
SYMBOL pmos 1408 -432 R270
SYMATTR InstName M5
SYMATTR Value AO6407
SYMBOL pmos 2992 -432 M270
SYMATTR InstName M6
SYMATTR Value AO6407
SYMBOL schottky 2912 48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL pmos 2128 -208 M180
SYMATTR InstName M7
SYMATTR Value AO6407
SYMBOL res 1616 -384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL nmos 1552 64 R0
SYMATTR InstName M8
SYMATTR Value 2N7002
SYMBOL npn 1632 -432 R0
SYMATTR InstName Q1
SYMATTR Value BC846B
SYMBOL schottky 1680 -304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 3312 0 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 2432 -368 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL nmos 2320 160 R90
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL res 2032 144 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL sw 2048 432 R180
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL voltage 2224 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 0.5m 1n 1n 1m 300u)
SYMBOL res 2160 -208 R0
SYMATTR InstName R3
SYMATTR Value 22
SYMBOL res 2032 32 R0
SYMATTR InstName R5
SYMATTR Value 0
SYMBOL res 2432 64 R0
SYMATTR InstName R6
SYMATTR Value 0
TEXT 512 136 Left 2 !.tran 0 2.4m 0
TEXT 960 -696 Left 2 ;Power supply priority\nVbat >> VUSB so that normal power path doesn't work (because body diode of PMOS always conducts)\nLow quiescent current when only VBAT is present
TEXT 960 -608 Left 2 ;Also serves as reverse polarity protection for VBAT
TEXT 2096 464 Left 2 !.model MYSW SW(Ron=0.1 Roff=10Meg Vt=2 Vh=0.2)
