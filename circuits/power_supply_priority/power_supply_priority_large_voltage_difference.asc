Version 4
SHEET 1 3544 1144
WIRE 1008 -352 976 -352
WIRE 1408 -352 1008 -352
WIRE 1600 -352 1504 -352
WIRE 1696 -352 1600 -352
WIRE 2176 -352 1696 -352
WIRE 2448 -352 2176 -352
WIRE 2896 -352 2448 -352
WIRE 3056 -352 2992 -352
WIRE 3328 -352 3056 -352
WIRE 3392 -352 3328 -352
WIRE 3440 -352 3392 -352
WIRE 1696 -304 1696 -352
WIRE 1600 -256 1600 -272
WIRE 1632 -256 1600 -256
WIRE 2448 -224 2448 -352
WIRE 2176 -176 2176 -352
WIRE 1600 -160 1600 -256
WIRE 1616 -160 1600 -160
WIRE 1696 -160 1696 -208
WIRE 1696 -160 1680 -160
WIRE 1920 -160 1696 -160
WIRE 2048 -160 1920 -160
WIRE 2128 -160 2048 -160
WIRE 1488 -32 1488 -304
WIRE 2176 -32 2176 -80
WIRE 2176 -32 1488 -32
WIRE 2256 -32 2176 -32
WIRE 2448 -32 2448 -144
WIRE 2448 -32 2256 -32
WIRE 2912 -32 2912 -304
WIRE 2912 -32 2448 -32
WIRE 3328 0 3328 -352
WIRE 3440 0 3440 -352
WIRE 1008 32 976 32
WIRE 1472 32 1008 32
WIRE 2912 32 1472 32
WIRE 3056 32 3056 -352
WIRE 3056 32 2976 32
WIRE 1600 64 1600 -160
WIRE 1472 144 1472 32
WIRE 1552 144 1472 144
WIRE 3328 144 3328 64
WIRE 3440 144 3440 80
WIRE 2048 160 2048 -160
WIRE 2240 160 2048 160
WIRE 1600 208 1600 160
WIRE 2448 208 2448 -32
WIRE 2448 208 2320 208
WIRE 2224 240 2224 208
WIRE 2224 240 2048 240
WIRE 2048 336 2048 240
WIRE 2224 336 2096 336
WIRE 2096 352 2096 336
WIRE 2096 416 2096 400
WIRE 2224 416 2096 416
WIRE 2048 480 2048 416
FLAG 912 192 0
FLAG 896 -256 0
FLAG 912 112 VUSB
FLAG 896 -336 VBAT
FLAG 3440 144 0
FLAG 3392 -352 OUT
FLAG 1008 32 VUSB
FLAG 1008 -352 VBAT
FLAG 1600 208 0
FLAG 2256 -32 gate
FLAG 1920 -160 gate1
FLAG 3328 144 0
FLAG 2048 480 0
SYMBOL voltage 912 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 1m 1n 1n 1m 2m)
SYMBOL voltage 896 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL res 3424 -16 R0
SYMATTR InstName Rload1
SYMATTR Value 100
SYMBOL pmos 1408 -304 R270
SYMATTR InstName M5
SYMATTR Value AO6407
SYMBOL pmos 2992 -304 M270
SYMATTR InstName M6
SYMATTR Value AO6407
SYMBOL schottky 2912 48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL pmos 2128 -80 M180
SYMATTR InstName M7
SYMATTR Value AO6407
SYMBOL res 1616 -256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL nmos 1552 64 R0
SYMATTR InstName M8
SYMATTR Value 2N7002
SYMBOL npn 1632 -304 R0
SYMATTR InstName Q1
SYMATTR Value BC846B
SYMBOL schottky 1680 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 3312 0 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 2432 -240 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL nmos 2320 160 R90
SYMATTR InstName M3
SYMATTR Value 2N7002
SYMBOL res 2032 144 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL sw 2048 432 R180
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL voltage 2224 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 2.1m 1n 1n 100u 300u)
TEXT 512 136 Left 2 !.tran 0 2.4m 1.6m
TEXT 960 -568 Left 2 ;Power supply priority\nVbat >> VUSB so that normal power path doesn't work (because body diode of PMOS always conducts)\nLow quiescent current when only VBAT is present
TEXT 960 -480 Left 2 ;Also serves as reverse polarity protection for VBAT
TEXT 2096 464 Left 2 !.model MYSW SW(Ron=0.1 Roff=10Meg Vt=2 Vh=0.2)
