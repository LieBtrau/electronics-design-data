Version 4
SHEET 1 2328 1144
WIRE 1008 -160 976 -160
WIRE 1408 -160 1008 -160
WIRE 1536 -160 1504 -160
WIRE 1808 -160 1536 -160
WIRE 1936 -160 1808 -160
WIRE 2096 -160 2032 -160
WIRE 2176 -160 2096 -160
WIRE 2224 -160 2176 -160
WIRE 1808 -128 1808 -160
WIRE 1536 -112 1536 -160
WIRE 1664 -112 1616 -112
WIRE 1760 -112 1664 -112
WIRE 1488 -32 1488 -112
WIRE 1808 -32 1488 -32
WIRE 1952 -32 1952 -112
WIRE 1952 -32 1808 -32
WIRE 2224 0 2224 -160
WIRE 1008 32 976 32
WIRE 1472 32 1008 32
WIRE 1952 32 1472 32
WIRE 2096 32 2096 -160
WIRE 2096 32 2016 32
WIRE 1664 64 1664 -112
WIRE 1808 64 1808 -32
WIRE 1472 144 1472 32
WIRE 1616 144 1472 144
WIRE 2224 144 2224 80
WIRE 1664 208 1664 160
WIRE 1744 208 1664 208
WIRE 1808 208 1808 144
WIRE 1808 208 1744 208
WIRE 1744 336 1744 288
FLAG 912 192 0
FLAG 896 -64 0
FLAG 912 112 VUSB
FLAG 896 -144 VBAT
FLAG 2224 144 0
FLAG 2176 -160 OUT
FLAG 1008 32 VUSB
FLAG 1008 -160 VBAT
FLAG 1744 336 0
SYMBOL voltage 912 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 1m 1n 1n 1m 2m)
SYMBOL voltage 896 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(-10 10 2m 1n 1n 2m 4m)
SYMBOL res 2208 -16 R0
SYMATTR InstName Rload1
SYMATTR Value 100
SYMBOL pmos 1408 -112 R270
SYMATTR InstName M5
SYMATTR Value AO6407
SYMBOL pmos 2032 -112 M270
SYMATTR InstName M6
SYMATTR Value AO6407
SYMBOL schottky 1952 48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1792 48 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL pmos 1760 -32 M180
SYMATTR InstName M7
SYMATTR Value AO6407
SYMBOL res 1632 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL nmos 1616 64 R0
SYMATTR InstName M8
SYMATTR Value 2N7002
SYMBOL res 1728 192 R0
SYMATTR InstName R5
SYMATTR Value 0.01
TEXT 512 136 Left 2 !.tran 4m
TEXT 960 -376 Left 2 ;Power supply priority\nVbat >> VUSB so that normal power path doesn't work (because body diode of PMOS always conducts)\nLow quiescent current when only VBAT is present
TEXT 960 -288 Left 2 ;Also serves as reverse polarity protection for VBAT
