Version 4
SHEET 1 2280 680
WIRE 1488 -240 1328 -240
WIRE 1648 -240 1488 -240
WIRE 1696 -240 1648 -240
WIRE 2016 -240 1776 -240
WIRE 2144 -240 2016 -240
WIRE 1328 -224 1328 -240
WIRE 2144 -224 2144 -240
WIRE 1648 -208 1648 -240
WIRE 2016 -208 2016 -240
WIRE 416 -176 416 -224
WIRE 1488 -176 1488 -240
WIRE 896 -128 832 -128
WIRE 1008 -128 960 -128
WIRE 1168 -128 1088 -128
WIRE 1328 -128 1328 -144
WIRE 2144 -112 2144 -144
WIRE 1648 -96 1648 -144
WIRE 2016 -96 2016 -144
WIRE 416 -48 416 -96
WIRE 80 -32 32 -32
WIRE 176 -32 144 -32
WIRE 832 -32 832 -128
WIRE 896 -32 832 -32
WIRE 1008 -32 960 -32
WIRE 1168 -32 1168 -128
WIRE 1168 -32 1088 -32
WIRE 1328 -32 1328 -48
WIRE 1488 -32 1488 -112
WIRE 1488 -32 1328 -32
WIRE 1328 -16 1328 -32
WIRE -208 64 -240 64
WIRE -96 64 -208 64
WIRE 0 64 -16 64
WIRE 32 64 32 -32
WIRE 32 64 0 64
WIRE 80 64 32 64
WIRE 176 64 176 -32
WIRE 176 64 144 64
WIRE 368 64 176 64
WIRE 608 64 512 64
WIRE 704 64 672 64
WIRE 832 64 832 -32
WIRE 832 64 784 64
WIRE 976 64 832 64
WIRE 1168 64 1168 -32
WIRE 1168 64 1120 64
WIRE 1184 64 1168 64
WIRE 1280 64 1264 64
WIRE 832 80 832 64
WIRE -240 96 -240 64
WIRE 176 96 176 64
WIRE 368 96 352 96
WIRE 560 96 512 96
WIRE 976 96 960 96
WIRE 1168 96 1120 96
WIRE 560 128 560 96
WIRE 1168 128 1168 96
WIRE 1328 160 1328 80
WIRE 832 192 832 144
WIRE -240 208 -240 176
WIRE 176 208 176 176
WIRE 0 240 0 64
WIRE 1280 240 0 240
WIRE 1328 304 1328 256
FLAG 416 -48 0
FLAG 416 -224 VCC
FLAG 960 96 VCC
FLAG 832 192 0
FLAG 1168 128 0
FLAG 352 96 VCC
FLAG 560 128 0
FLAG 176 208 0
FLAG -240 208 0
FLAG 2144 -112 0
FLAG 1328 304 0
FLAG -208 64 EN
FLAG 1648 -96 0
FLAG 2016 -96 0
SYMBOL voltage 416 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL cap 816 80 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL AutoGenerated\\SN74LVC1G14 1024 80 R0
WINDOW 0 -30 -35 Bottom 2
SYMATTR InstName U1
SYMBOL res 1104 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL AutoGenerated\\SN74LVC1G14 416 80 R0
WINDOW 0 -30 -35 Bottom 2
SYMATTR InstName U2
SYMBOL schottky 672 80 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 144 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL res 160 80 R0
SYMATTR InstName R3
SYMATTR Value 3.3k
SYMBOL schottky 144 -16 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -240 80 R0
WINDOW 3 -21 184 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 5 1m 1n 1n 100ms 150ms)
SYMATTR InstName V2
SYMBOL nmos 1280 -16 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL nmos 1280 160 R0
SYMATTR InstName M2
SYMATTR Value 2N7002
SYMBOL res 1312 -144 R0
SYMATTR InstName R4
SYMATTR Value 137
SYMBOL voltage 2144 -240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V3
SYMATTR Value 48
SYMBOL res 0 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL ind 1312 -240 R0
SYMATTR InstName L1
SYMATTR Value 600m
SYMBOL schottky 1472 -112 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 960 -16 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 896 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1104 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 3.3k
SYMBOL res 800 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res 1280 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL ind 1792 -256 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 100µ
SYMATTR SpiceLine Rser=0.39
SYMBOL cap 1632 -208 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL cap 2000 -208 R0
SYMATTR InstName C4
SYMATTR Value 10µ
TEXT -48 -224 Left 2 !.tran 0 200ms 5m 1u startup uic
TEXT 584 -328 Left 2 ;C2, R3 : determine length of initial 100% duty cycle phase (C2=10µF, R3=100K -> 0.9s fully on)\nR6, R2 : control the hold current.  If R2=R6, then hold current will be 50% of the maximum.
TEXT 152 288 Left 2 ;Operation : On rising edge of EN, U2.A is high, U2.Y is low, U1.A is kept low.  This prevents\noscillation of U1.  U1.Y is high and both M1 and M2 are fully on.\nAs C2 charges, U2.A becomes low.  U2.Y becomes high.  This blocks D1 and R1, allowing\nthe oscillator around U1 to run freely.  M1 will open and close periodically, determined by the values of C1, R2 and R6.\nIf EN goes low, M2 stops conducting and the solenoid is released.\nIf no EN signal is required, EN can be tied to +5V, R5 can be short-circuited and M2 can be removed.  Tie source of M1 to GND.
TEXT -272 -328 Left 2 ;Purpose : Control a solenoid with an initial kick (around 1s) and \nreduce the current afterwards to avoid excessive heating.
TEXT 152 472 Left 2 ;Relay:\n* https://benl.rs-online.com/web/p/linear-solenoids/1770117\n* https://nl.transmotec.com/product/F1040S-24V/
